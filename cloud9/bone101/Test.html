<html>
<head>
<script src="http://192.168.7.2/socket.io/socket.io.js"></script>
<script src="http://192.168.7.2/bonescript.js"></script>
<script type="text/javascript">
function allLED(){
var b=require('bonescript');
b.pinMode('USR0', 'out');
b.pinMode('USR1', 'out');
b.pinMode('USR2', 'out');
b.pinMode('USR3', 'out');
b.digitalWrite('USR0', 1);
b.digitalWrite('USR1', 1);
b.digitalWrite('USR2', 1);
b.digitalWrite('USR3', 1);
alert("All LEDs are ON");
}

function noLED(){
var b=require('bonescript');
b.pinMode('USR0', 'out');
b.pinMode('USR1', 'out');
b.pinMode('USR2', 'out');
b.pinMode('USR3', 'out');
b.digitalWrite('USR0', 0);
b.digitalWrite('USR1', 0);
b.digitalWrite('USR2', 0);
b.digitalWrite('USR3', 0);
alert("All LEDs are OFF");
}

function resetLED(){
var b = require('bonescript');
var p = '/sys/class/leds/beaglebone:green:usr';
b.digitalWrite('USR0', b.LOW);
b.digitalWrite('USR1', b.LOW);
b.digitalWrite('USR2', b.LOW);
b.digitalWrite('USR3', b.LOW);
resetUSR0();
alert("All LEDs are in normal state");
}

function resetUSR0() {
    b.writeTextFile(p+'0/trigger', 'heartbeat', resetUSR1);
}
function resetUSR1() {
    b.writeTextFile(p+'1/trigger', 'mmc0', resetUSR2);
}
function resetUSR2() {
    b.writeTextFile(p+'2/trigger', 'cpu0', resetUSR3);
}
function resetUSR3() {
    b.writeTextFile(p+'3/trigger', 'mmc1', complete);
}
function complete() {
}
</script>
</head>
<body>
<input type="button" value="All" onclick="allLED"/>
<input type="button" value="None" onclick="noLED"/>
<input type="button" value="Normal" onclick="resetLED"/>
</body>
</html>